{% extends 'base.html' %}
{% block head %}
<style>
.profile-hero {
  min-height: 80vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(120deg, #fffbe6 0%, #f8f6f3 100%);
}
.profile-card {
  background: rgba(255,255,255,0.98);
  border-radius: 2rem;
  box-shadow: 0 8px 32px rgba(199,161,122,0.13);
  padding: 3rem 2.5rem 2.5rem 2.5rem;
  max-width: 420px;
  width: 100%;
  text-align: center;
  position: relative;
  border: 1.5px solid #c7a17a;
}
.profile-avatar {
  width: 110px;
  height: 110px;
  border-radius: 50%;
  object-fit: cover;
  margin-bottom: 1.2rem;
  border: 4px solid #ffd700;
  background: #f8f6f3;
  box-shadow: 0 2px 12px rgba(199,161,122,0.13);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2.7rem;
  color: #a67c52;
}
.profile-title {
  font-size: 2.1rem;
  font-weight: 800;
  color: #2d2013;
  margin-bottom: 0.3rem;
  letter-spacing: 1px;
  font-family: 'Playfair Display', Georgia, serif;
}
.profile-role {
  color: #ffd700;
  font-weight: 600;
  margin-bottom: 1.1rem;
  font-size: 1.1rem;
  letter-spacing: 0.5px;
}
.profile-info {
  text-align: left;
  margin: 0 auto 1.5rem auto;
  max-width: 340px;
  background: #f8f6f3;
  border-radius: 1rem;
  padding: 1.2rem 1.2rem 0.7rem 1.2rem;
  box-shadow: 0 2px 8px rgba(199,161,122,0.07);
}
.profile-info p {
  margin: 0.4rem 0;
  color: #3a2a1b;
  font-size: 1.07rem;
}
.profile-info strong {
  color: #a67c52;
  font-weight: 600;
}
.profile-actions {
  margin: 1.5rem 0 0.5rem 0;
  display: flex;
  flex-direction: column;
  gap: 0.7rem;
}
.profile-actions a, .profile-actions button {
  background: linear-gradient(90deg,#ffd700 0%,#c7a17a 100%);
  color: #2d2013;
  font-weight: 700;
  border: none;
  border-radius: 1.2rem;
  padding: 0.7rem 1.5rem;
  text-decoration: none;
  box-shadow: 0 2px 8px rgba(199,161,122,0.13);
  transition: background 0.2s, color 0.2s;
  cursor: pointer;
  font-size: 1rem;
}
.profile-actions a:hover, .profile-actions button:hover {
  background: #fffbe6;
  color: #a67c52;
}
.profile-form label {
  font-weight: 600;
  color: #2d2013;
  margin-bottom: 0.3rem;
  display: block;
  text-align: left;
}
.profile-form input[type="email"] {
  margin: 0.5rem 0 1rem 0;
  padding: 0.6rem 1rem;
  border-radius: 0.7rem;
  border: 1px solid #c7a17a;
  width: 100%;
  max-width: 320px;
  font-size: 1rem;
  background: #fffbe6;
}
.profile-form button {
  background: var(--accent);
  color: #fff;
  padding: 0.5rem 1.5rem;
  border-radius: 1rem;
  border: none;
  font-weight: 600;
  margin-top: 0.2rem;
  transition: background 0.2s;
}
.profile-form button:hover {
  background: #ffd700;
  color: #2d2013;
}
</style>
{% endblock %}
{% block content %}
<div class="profile-hero">
  <div class="profile-card">
    {% if user.profile_picture %}
      <img src="{{ user.profile_picture.url }}" alt="Profile Picture" class="profile-avatar" />
    {% else %}
      <div class="profile-avatar">{{ user.first_name|default:user.username|first|upper }}</div>
    {% endif %}
    <div class="profile-title">{{ user.first_name }} {{ user.last_name }}</div>
    <div class="profile-role">{{ user.get_role_display }}</div>
    <div class="profile-info">
      <p><strong>Email:</strong> {{ user.email }}</p>
      <p><strong>Bio:</strong> {{ user.bio|default:'-' }}</p>
      <p><strong>Location:</strong> {{ user.location|default:'-' }}</p>
      <p><strong>Contact Info:</strong> {{ user.contact_info|default:'-' }}</p>
      {% if user.badges %}<p><strong>Badges:</strong> {{ user.badges }}</p>{% endif %}
      {% if user.certifications %}<p><strong>Certifications:</strong> {{ user.certifications }}</p>{% endif %}
      {% if user.awards %}<p><strong>Awards:</strong> {{ user.awards }}</p>{% endif %}
      {% if user.social_proof %}<p><strong>Social Proof:</strong> <a href="{{ user.social_proof }}" target="_blank">View</a></p>{% endif %}
    </div>
    <form method="post" action="" class="profile-form">
      {% csrf_token %}
      <label for="email">Update Email:</label>
      <input type="email" name="email" id="email" value="{{ user.email }}" required placeholder="Enter your email">
      <button type="submit">Update Email</button>
    </form>
    <div class="profile-actions">
      {% if is_own_profile %}
        <a href="{% url 'users:dashboard' %}">üìä My Dashboard</a>
        <a href="{% url 'blog_create' %}">‚úçÔ∏è Write Blog Post</a>
        <a href="{% url 'blog_list' %}?author={{ user.id }}">üìñ My Blog Posts</a>
        <a href="/portfolio/photographers/">Find Photographers</a>
        <a href="/bookings/create/">Book a Photographer</a>
        <a href="/reviews/">Read Reviews</a>
        <a href="/users/logout/" style="background:#fffbe6;color:#a67c52;">Log Out</a>
      {% else %}
        <a href="{% url 'blog_list' %}?author={{ user.id }}">üìñ View Blog Posts</a>
        <a href="/portfolio/photographers/">Find Photographers</a>
        <a href="/bookings/create/">Book a Photographer</a>
        <a href="/reviews/">Read Reviews</a>
      {% endif %}
    </div>
    
    {% if is_own_profile and user_blog_posts %}
      <div style="margin-top: 2rem; padding-top: 2rem; border-top: 2px solid #e9e1d6;">
        <h3 style="color: #2d2013; margin-bottom: 1rem; text-align: center;">Recent Blog Posts</h3>
        <div style="max-height: 200px; overflow-y: auto;">
          {% for post in user_blog_posts %}
            <div style="padding: 0.8rem; margin-bottom: 0.5rem; background: #f8f6f3; border-radius: 8px; border-left: 3px solid #a67c52;">
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                  <strong style="color: #2d2013;">{{ post.title|truncatechars:40 }}</strong>
                  <div style="font-size: 0.9rem; color: #6B6B6B;">{{ post.created_at|date:'M d, Y' }}</div>
                </div>
                <div style="display: flex; gap: 0.5rem;">
                  <a href="{% url 'blog_edit' post.pk %}" style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: #a67c52; color: white; border-radius: 4px; text-decoration: none;">Edit</a>
                  {% if post.is_published %}
                    <a href="{% url 'blog_detail' post.pk %}" style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: #2d2013; color: white; border-radius: 4px; text-decoration: none;">View</a>
                  {% endif %}
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
        <div style="text-align: center; margin-top: 1rem;">
          <a href="{% url 'users:dashboard' %}" style="background: #a67c52; color: white; padding: 0.8rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600;">View All Posts</a>
        </div>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
