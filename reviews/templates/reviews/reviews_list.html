{% extends 'base.html' %}

{% block content %}
<div style="max-width:1200px;margin:3.5rem auto 0 auto;padding:0 1rem;">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;">
    <h2>Customer Reviews</h2>
    {% if user.is_authenticated %}
      <a href="{% url 'reviews:add_review' %}" style="background:#a67c52;color:white;padding:0.75rem 1.5rem;border-radius:25px;text-decoration:none;font-weight:600;box-shadow:0 4px 15px rgba(166,124,82,0.3);transition:all 0.2s;">
        ✍️ Write a Review
      </a>
    {% endif %}
  </div>
  
  <div style="display:flex;flex-direction:column;gap:2.5rem;align-items:center;">
    {% if page_obj %}
      {% for review in page_obj %}
        <div style="background:#fff;border-radius:1rem;box-shadow:0 4px 16px rgba(0,0,0,0.1);padding:2rem;width:100%;max-width:800px;">
          <h3>{{ review.title|default:"Review" }}</h3>
          <div>
            {% for i in "12345" %}
              {% if forloop.counter <= review.overall_rating %}
                <span style="color:#ffd700;"></span>
              {% else %}
                <span style="color:#ddd;"></span>
              {% endif %}
            {% endfor %}
            ({{ review.overall_rating }})
          </div>
          <p><strong>{{ review.reviewer.first_name }} {{ review.reviewer.last_name }}</strong></p>
          <p>"{{ review.comment }}"</p>
          <small>{{ review.created_at|date:'M d, Y' }}</small>
        </div>
      {% endfor %}
    {% else %}
      <div style="text-align:center;padding:4rem;">
        <h3>No Reviews Found</h3>
        <p>Be the first to share your experience!</p>
        {% if user.is_authenticated %}
          <a href="{% url 'reviews:add_review' %}" style="background:#a67c52;color:white;padding:1rem 2rem;border-radius:25px;text-decoration:none;font-weight:600;display:inline-block;margin-top:1rem;box-shadow:0 4px 15px rgba(166,124,82,0.3);">
            ✍️ Write the First Review
          </a>
        {% else %}
          <a href="{% url 'users:login' %}" style="background:#a67c52;color:white;padding:1rem 2rem;border-radius:25px;text-decoration:none;font-weight:600;display:inline-block;margin-top:1rem;">
            Login to Write a Review
          </a>
        {% endif %}
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
